# MySQL索引为什么要用B+树实现？
---

### 二叉查找树（带有特殊属性的二叉树）
  * 每个节点最多拥有两个子节点
  * 每个节点值大于左边子节点、小于右边子节点
  * 没有值相等的重复节点

### 平衡二叉查找树(AVL树)
  * 在二叉查找树的基础上多了一点：每个节点左右子树的高度相差最多为1
  * 平衡二叉树的查找效率确实很快，但维护一颗平衡二叉树的代价是非常大的，需要1次或多次旋转来重新平衡这个树

### B树（平衡多路查找树）
  * 在平衡二叉树的基础上，每个节点上可以存储多个元素
  * 所有的叶子节点都处于同一层级，不存在层级高度差的问题。  

### B树和B+树的区别
  * B+树的非叶子节点只保存键值，不保存数据，使得B+树每个节点所能保存的键值大大增加
  * B+树叶子节点保存所有键值和目标数据，每个叶子节点的键值从小到大双向连接（链表）
  * B+树的非叶子节点只进行数据索引，不会存目标数据，所有数据必须要到叶子节点才能获取到，所以每次数据查询的次数都一样

### Mysql索引要用B+树原因如下
  * 在B树的基础上每个节点存储的键值更多，树的层级更少，查询数据更快（**查询更快**）
  * B+树的查询效率更加稳定，因为数据放在叶子节点，每次查询的次数为树的高度（**查询次数稳定**）
  * B+树能提高范围查询的效率，因为叶子节点通过指针顺序连接（**范围查询效率高**）
  * B+树遍历整棵树只需要遍历所有的叶子节点即可，而不需要像B树一样需要对每一层进行遍历，遍历速度更快，有利于数据库做全表扫描（**遍历整棵树快**）

### 索引存储形式
  * **主键索引：<id, row>**

  ![](/images/program/mysql/index1.png)

  * **普通索引：<index, id>**

  ![](/images/program/mysql/index2.png)

::: tip 相关链接

[https://juejin.cn/post/6844903692802457607](https://juejin.cn/post/6844903692802457607)

:::
